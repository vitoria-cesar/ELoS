function $parcel$export(e,o,r,t){Object.defineProperty(e,o,{get:r,set:t,enumerable:!0,configurable:!0})}var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequiredf3e;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var o=$parcel$inits[e];delete $parcel$inits[e];var r={id:e,exports:{}};return $parcel$modules[e]=r,o.call(r.exports,r,r.exports),r.exports}var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t},parcelRequire.register=function(e,o){$parcel$inits[e]=o},$parcel$global.parcelRequiredf3e=parcelRequire),parcelRequire.register("dRo73",(function(e,o){var r,t;$parcel$export(e.exports,"register",(()=>r),(e=>r=e)),$parcel$export(e.exports,"resolve",(()=>t),(e=>t=e));var a={};r=function(e){for(var o=Object.keys(e),r=0;r<o.length;r++)a[o[r]]=e[o[r]]},t=function(e){var o=a[e];if(null==o)throw new Error("Could not resolve bundle with id "+e);return o}})),parcelRequire.register("hktkA",(function(module,exports){var $4xklQ=parcelRequire("4xklQ"),$6WmIx=parcelRequire("6WmIx"),$9CUYQ=parcelRequire("9CUYQ"),$apQQe=parcelRequire("apQQe"),$czjZ1=parcelRequire("czjZ1"),$iw8wP=parcelRequire("iw8wP"),$8k6st=parcelRequire("8k6st");const scene=new $4xklQ.Scene,camera=new $4xklQ.PerspectiveCamera(45,2,1,1e3);camera.position.set(0,15,30);const renderer=new $4xklQ.WebGLRenderer({canvas:document.getElementById("sceneView")});renderer.shadowMap.enabled=!0,renderer.shadowMap.type=$4xklQ.VSMShadowMap,window.addEventListener("resize",(function(){(0,$apQQe.resizeCanvasToDisplaySize)(renderer,camera)}),!1);const ambientLight=new $4xklQ.HemisphereLight("white","darkslategreywhi",.5),lightColor="white",dirLight=new $4xklQ.DirectionalLight(lightColor,.8);dirLight.position.set(0,20,15),dirLight.castShadow=!0,dirLight.shadow.mapSize.width=200,dirLight.shadow.mapSize.height=200,dirLight.shadow.camera.near=10,dirLight.shadow.camera.far=35,dirLight.shadow.camera.left=-12,dirLight.shadow.camera.right=12,dirLight.shadow.camera.bottom=-12,dirLight.shadow.camera.top=12,dirLight.shadow.radius=2,scene.add(dirLight);const controls=new(0,$6WmIx.OrbitControls)(camera,renderer.domElement),gridMapHelper=new(0,$9CUYQ.GridMapHelper),plane=gridMapHelper.createGridPlane();plane.receiveShadow=!0,plane.castShadow=!1;var actorModelPath=new URL(parcelRequire("8jwWx")).toString();const actor=new $4xklQ.Object3D;(0,$apQQe.loadGLBFile)(actor,actorModelPath,"eve",2),actor.position.set(gridMapHelper.getGlobalXPositionFromCoord(0),1,gridMapHelper.getGlobalZPositionFromCoord(2)),actor.rotateY((0,$apQQe.degreeToRadians)(90)),actor.castShadow=!0,actor.receiveShadow=!1;var crystalModelPath=new URL(parcelRequire("kgSYq")).toString(),crystalTexturePath=new URL(parcelRequire("4sKsP")).toString();const objective1=new $4xklQ.Object3D;(0,$apQQe.loadOBJFile)(objective1,crystalModelPath,"crystal",crystalTexturePath,2),objective1.rotateX((0,$apQQe.degreeToRadians)(-90)),objective1.castShadow=!0;const objective2=new $4xklQ.Object3D;(0,$apQQe.loadOBJFile)(objective2,crystalModelPath,"crystal",crystalTexturePath,2),objective2.rotateX((0,$apQQe.degreeToRadians)(-90)),objective2.castShadow=!0;const objective3=new $4xklQ.Object3D;(0,$apQQe.loadOBJFile)(objective3,crystalModelPath,"crystal",crystalTexturePath,2),objective3.rotateX((0,$apQQe.degreeToRadians)(-90)),objective3.castShadow=!0,objective1.position.set(gridMapHelper.getGlobalXPositionFromCoord(6),0,gridMapHelper.getGlobalZPositionFromCoord(2)),objective2.position.set(gridMapHelper.getGlobalXPositionFromCoord(7),0,gridMapHelper.getGlobalZPositionFromCoord(8)),objective3.position.set(gridMapHelper.getGlobalXPositionFromCoord(2),0,gridMapHelper.getGlobalZPositionFromCoord(5));var trapModelPath=new URL(parcelRequire("3SQE2")).toString(),trapTexturePath=new URL(parcelRequire("lXrwy")).toString();const trap1=new $4xklQ.Object3D;(0,$apQQe.loadOBJFile)(trap1,trapModelPath,"trap",trapTexturePath,1.5),trap1.castShadow=!0;const trap2=new $4xklQ.Object3D;(0,$apQQe.loadOBJFile)(trap2,trapModelPath,"trap",trapTexturePath,1.5),trap2.castShadow=!0;const trap3=new $4xklQ.Object3D;(0,$apQQe.loadOBJFile)(trap3,trapModelPath,"trap",trapTexturePath,1.5),trap3.rotateY((0,$apQQe.degreeToRadians)(90)),trap3.castShadow=!0,trap1.position.set(gridMapHelper.getGlobalXPositionFromCoord(6),.4,gridMapHelper.getGlobalZPositionFromCoord(8)),trap2.position.set(gridMapHelper.getGlobalXPositionFromCoord(1),.4,gridMapHelper.getGlobalZPositionFromCoord(5)),trap3.position.set(gridMapHelper.getGlobalXPositionFromCoord(6),.4,gridMapHelper.getGlobalZPositionFromCoord(3));const boxGeometry=new $4xklQ.BoxGeometry(2,2,2);var aux=new URL(parcelRequire("4Op5W")).toString(),textureParede=(new $4xklQ.TextureLoader).load(aux);const boxMaterial=new $4xklQ.MeshBasicMaterial({map:textureParede}),box1=new $4xklQ.Mesh(boxGeometry,boxMaterial);box1.castShadow=!0;const box2=new $4xklQ.Mesh(boxGeometry,boxMaterial);box2.castShadow=!0;const box3=new $4xklQ.Mesh(boxGeometry,boxMaterial);box3.castShadow=!0,box1.position.set(gridMapHelper.getGlobalXPositionFromCoord(5),1,gridMapHelper.getGlobalXPositionFromCoord(7)),box2.position.set(gridMapHelper.getGlobalXPositionFromCoord(6),1,gridMapHelper.getGlobalZPositionFromCoord(7)),box3.position.set(gridMapHelper.getGlobalXPositionFromCoord(7),1,gridMapHelper.getGlobalZPositionFromCoord(7));const box4=new $4xklQ.Mesh(boxGeometry,boxMaterial);box4.castShadow=!0;const box5=new $4xklQ.Mesh(boxGeometry,boxMaterial);box5.castShadow=!0;const box6=new $4xklQ.Mesh(boxGeometry,boxMaterial);box6.castShadow=!0,box4.position.set(gridMapHelper.getGlobalXPositionFromCoord(1),1,gridMapHelper.getGlobalXPositionFromCoord(4)),box5.position.set(gridMapHelper.getGlobalXPositionFromCoord(2),1,gridMapHelper.getGlobalZPositionFromCoord(4)),box6.position.set(gridMapHelper.getGlobalXPositionFromCoord(3),1,gridMapHelper.getGlobalZPositionFromCoord(4));const box7=new $4xklQ.Mesh(boxGeometry,boxMaterial);box7.rotateX((0,$apQQe.degreeToRadians)(-90)),box7.castShadow=!0;const box8=new $4xklQ.Mesh(boxGeometry,boxMaterial);box8.rotateX((0,$apQQe.degreeToRadians)(-90)),box8.castShadow=!0;const box9=new $4xklQ.Mesh(boxGeometry,boxMaterial);box9.rotateX((0,$apQQe.degreeToRadians)(-90)),box9.castShadow=!0,box7.position.set(gridMapHelper.getGlobalXPositionFromCoord(5),1,gridMapHelper.getGlobalXPositionFromCoord(1)),box8.position.set(gridMapHelper.getGlobalXPositionFromCoord(5),1,gridMapHelper.getGlobalZPositionFromCoord(2)),box9.position.set(gridMapHelper.getGlobalXPositionFromCoord(5),1,gridMapHelper.getGlobalZPositionFromCoord(3));var clock=new $4xklQ.Clock;let loader=new $4xklQ.TextureLoader,aux1=new URL(parcelRequire("f323l")).toString(),fireTex=loader.load(aux1),fire1=new(0,$8k6st.default)(fireTex);fire1.scale.set(1.2,3,1.2),fire1.position.set(gridMapHelper.getGlobalXPositionFromCoord(4),1.5,gridMapHelper.getGlobalZPositionFromCoord(5));let fire2=new(0,$8k6st.default)(fireTex);function animate(){requestAnimationFrame(animate),controls.update(),fire1.update(clock),fire2.update(clock),renderer.render(scene,camera);let e=(0,$apQQe.getTotalTime)($apQQe.sceneProperties.phaseTimer.getElapsedTime());(0,$apQQe.displayTime)(e)}async function andarFrente(e){await(0,$apQQe.translateActorFoward)(actor,e,gridMapHelper,$apQQe.sceneProperties)}async function andarTras(e){await(0,$apQQe.translateActorBackward)(actor,e,gridMapHelper,$apQQe.sceneProperties)}async function girarDireita(){await(0,$apQQe.rotateActorRight)(actor,$apQQe.sceneProperties)}async function girarEsquerda(){await(0,$apQQe.rotateActorLeft)(actor,$apQQe.sceneProperties)}function checkCollision(e,o){return gridMapHelper.getXCoordFromGlobalPosition(e.position.x)==gridMapHelper.getXCoordFromGlobalPosition(o.position.x)&&gridMapHelper.getZCoordFromGlobalPosition(e.position.z)==gridMapHelper.getZCoordFromGlobalPosition(o.position.z)}function coletarCristal(){$apQQe.sceneProperties.cancelExecution||(checkCollision(actor,objective1)?(objective1.visible=!1,(0,$apQQe.printOnConsole)("Cristal coletado.")):checkCollision(actor,objective2)?(objective2.visible=!1,(0,$apQQe.printOnConsole)("Cristal coletado.")):checkCollision(actor,objective3)?(objective3.visible=!1,(0,$apQQe.printOnConsole)("Cristal coletado.")):(0,$apQQe.printOnConsole)("Robô não está sobre o cristal."),objective1.visible||objective2.visible||objective3.visible||(0,$apQQe.printOnConsole)("Todos os cristais coletados com sucesso!"))}function resetLevel(){actor.position.set(gridMapHelper.getGlobalXPositionFromCoord(0),1,gridMapHelper.getGlobalZPositionFromCoord(2)),actor.getObjectByName("eve").rotation.set(0,0,0),actor.rotation.set(0,(0,$apQQe.degreeToRadians)(90),0),objective1.visible=!0,objective2.visible=!0,objective3.visible=!0}function winCondition(){return!(objective1.visible||objective2.visible||objective3.visible)}fire2.scale.set(1.2,3,1.2),fire2.position.set(gridMapHelper.getGlobalXPositionFromCoord(7),1.5,gridMapHelper.getGlobalZPositionFromCoord(0)),scene.add(ambientLight),scene.add(plane),scene.add(objective1),scene.add(objective2),scene.add(objective3),scene.add(actor),scene.add(trap1),scene.add(trap2),scene.add(trap3),scene.add(box1),scene.add(box2),scene.add(box3),scene.add(box4),scene.add(box5),scene.add(box6),scene.add(box7),scene.add(box8),scene.add(box9),scene.add(fire1),scene.add(fire2);const execBtn=document.getElementById("execute");execBtn.addEventListener("click",(async function(){let codeParsed=(0,$iw8wP.parseCode)($czjZ1.editor.state.doc.toString());$apQQe.sceneProperties.cancelExecution=!1,null!=codeParsed&&(resetLevel(),document.getElementById("execute").disabled=!0,await eval(codeParsed),winCondition()?($czjZ1.readOnlyState.doc=$czjZ1.editor.state.doc,$czjZ1.editor.setState($czjZ1.readOnlyState),document.getElementById("winMessage").classList.remove("invisible"),document.getElementById("advanceBtn").classList.remove("invisible"),document.getElementById("reset").disabled=!0,$apQQe.sceneProperties.phaseTimer.stop()):document.getElementById("execute").disabled=!1)}));const resetBtn=document.getElementById("reset");resetBtn.addEventListener("click",(function(){$apQQe.sceneProperties.cancelExecution=!0,resetLevel()}));const clsConsoleBtn=document.getElementById("clsConsole");clsConsoleBtn.addEventListener("click",(function(){document.getElementById("console-printing").innerHTML=null}));const advanceBtn=document.getElementById("advanceBtn");advanceBtn.addEventListener("click",(function(e){e.preventDefault(),(0,$apQQe.setTimeForNextPhase)("/level1/phase9/",(0,$apQQe.getTotalTime)($apQQe.sceneProperties.phaseTimer.getElapsedTime())),window.location.href=advanceBtn.href})),(0,$apQQe.resizeCanvasToDisplaySize)(renderer,camera),$apQQe.sceneProperties.phaseTimer.start(),animate()})),parcelRequire.register("iw8wP",(function(e,o){$parcel$export(e.exports,"parseCode",(()=>t));const r=[{filter:new RegExp("^andarFrente(\\s+)?\\((\\s+)?\\d+(\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^andarTras(\\s+)?\\((\\s+)?\\d+(\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^girarEsquerda(\\s+)?\\((\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^girarDireita(\\s+)?\\((\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^coletarCristal(\\s+)?\\((\\s+)?\\)(\\s+)?(;)?$"),type:"normal"}];function t(e){let o="async function runCode(){\n",t=e.split("\n"),a=!0;for(let e=0;e<t.length;e++){let n,s=!1;if(""!=t[e].trim()){for(let o=0;o<r.length;o++)if(s=r[o].filter.test(t[e].trim()),s){n=r[o].type;break}if(!s){i=t[e],l=e+1,document.getElementById("console-printing").innerHTML+=`Código Inválido:<br> ${i} linha: ${l}<br>`,a=!1;break}if("sequential"===n){o+="await "+t[e].trim()+"\n"}else{o+=t[e].trim()+"\n"}}}var i,l;return a?(o+="}\nrunCode()",o):null}})),parcelRequire.register("8k6st",(function(e,o){$parcel$export(e.exports,"default",(()=>a));var r=parcelRequire("4xklQ"),t=parcelRequire("1952D");class a extends r.Mesh{constructor(e){var o=new r.ShaderMaterial({defines:t.default.defines,uniforms:r.UniformsUtils.clone(t.default.uniforms),vertexShader:t.default.vertexShader,fragmentShader:t.default.fragmentShader,transparent:!0,depthWrite:!0,depthTest:!0});o.uniforms.fireTex.value=e,o.uniforms.invModelMatrix.value=new r.Matrix4,super(new r.BoxGeometry(1,1,1),o),this.setFileScale()}setFileScale(e=new r.Vector3(1,2.5,1)){this.fireScale=e}update(e){e.getDelta();var o=e.elapsedTime,r=this.material.uniforms.invModelMatrix.value;this.updateMatrixWorld(),r.copy(this.matrixWorld).invert(),void 0!==o&&(this.material.uniforms.time.value=o),this.material.uniforms.invModelMatrix.value=r,this.material.uniforms.scale.value=this.fireScale}}})),parcelRequire.register("1952D",(function(e,o){$parcel$export(e.exports,"default",(()=>r));var r={defines:{ITERATIONS:"20",OCTIVES:"3"},uniforms:{fireTex:{type:"t",value:null},color:{type:"c",value:null},time:{type:"f",value:0},invModelMatrix:{type:"m4",value:null},scale:{type:"v3",value:null},magnitude:{type:"f",value:1.3},lacunarity:{type:"f",value:2},gain:{type:"f",value:.5}},vertexShader:["varying vec3 vWorldPos;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","vWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform float time;","uniform float seed;","uniform mat4 invModelMatrix;","uniform vec3 scale;","uniform float magnitude;","uniform float lacunarity;","uniform float gain;","uniform sampler2D fireTex;","varying vec3 vWorldPos;","vec3 mod289(vec3 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 mod289(vec4 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 permute(vec4 x) {","return mod289(((x * 34.0) + 1.0) * x);","}","vec4 taylorInvSqrt(vec4 r) {","return 1.79284291400159 - 0.85373472095314 * r;","}","float snoise(vec3 v) {","const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);","const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);","vec3 i  = floor(v + dot(v, C.yyy));","vec3 x0 = v - i + dot(i, C.xxx);","vec3 g = step(x0.yzx, x0.xyz);","vec3 l = 1.0 - g;","vec3 i1 = min(g.xyz, l.zxy);","vec3 i2 = max(g.xyz, l.zxy);","vec3 x1 = x0 - i1 + C.xxx;","vec3 x2 = x0 - i2 + C.yyy;","vec3 x3 = x0 - D.yyy;","i = mod289(i); ","vec4 p = permute(permute(permute( ","i.z + vec4(0.0, i1.z, i2.z, 1.0))","+ i.y + vec4(0.0, i1.y, i2.y, 1.0)) ","+ i.x + vec4(0.0, i1.x, i2.x, 1.0));","float n_ = 0.142857142857;","vec3  ns = n_ * D.wyz - D.xzx;","vec4 j = p - 49.0 * floor(p * ns.z * ns.z);","vec4 x_ = floor(j * ns.z);","vec4 y_ = floor(j - 7.0 * x_);","vec4 x = x_ * ns.x + ns.yyyy;","vec4 y = y_ * ns.x + ns.yyyy;","vec4 h = 1.0 - abs(x) - abs(y);","vec4 b0 = vec4(x.xy, y.xy);","vec4 b1 = vec4(x.zw, y.zw);","vec4 s0 = floor(b0) * 2.0 + 1.0;","vec4 s1 = floor(b1) * 2.0 + 1.0;","vec4 sh = -step(h, vec4(0.0));","vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;","vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;","vec3 p0 = vec3(a0.xy, h.x);","vec3 p1 = vec3(a0.zw, h.y);","vec3 p2 = vec3(a1.xy, h.z);","vec3 p3 = vec3(a1.zw, h.w);","vec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));","p0 *= norm.x;","p1 *= norm.y;","p2 *= norm.z;","p3 *= norm.w;","vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);","m = m * m;","return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));","}","float turbulence(vec3 p) {","float sum = 0.0;","float freq = 1.0;","float amp = 1.0;","for(int i = 0; i < OCTIVES; i++) {","sum += abs(snoise(p * freq)) * amp;","freq *= lacunarity;","amp *= gain;","}","return sum;","}","vec4 samplerFire (vec3 p, vec4 scale) {","vec2 st = vec2(sqrt(dot(p.xz, p.xz)), p.y);","if(st.x <= 0.0 || st.x >= 1.0 || st.y <= 0.0 || st.y >= 1.0) return vec4(0.0);","p.y -= (seed + time) * scale.w;","p *= scale.xyz;","st.y += sqrt(st.y) * magnitude * turbulence(p);","if(st.y <= 0.0 || st.y >= 1.0) return vec4(0.0);","return texture2D(fireTex, st);","}","vec3 localize(vec3 p) {","return (invModelMatrix * vec4(p, 1.0)).xyz;","}","void main() {","vec3 rayPos = vWorldPos;","vec3 rayDir = normalize(rayPos - cameraPosition);","float rayLen = 0.0288 * length(scale.xyz);","vec4 col = vec4(0.0);","vec4 noiseScale = vec4(1, 2, 1, 0.3);","for(int i = 0; i < ITERATIONS; i++) {","rayPos += rayDir * rayLen;","vec3 lp = localize(rayPos);","lp.y += 0.5;","lp.xz *= 2.0;","col += samplerFire(lp, noiseScale);","}","col.a = col.r;","gl_FragColor = col;","}"].join("\n")}})),parcelRequire.register("8jwWx",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("6UgDP"),import.meta.url).toString()})),parcelRequire.register("kgSYq",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("2fkcW"),import.meta.url).toString()})),parcelRequire.register("4sKsP",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("jMxmz"),import.meta.url).toString()})),parcelRequire.register("3SQE2",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("dutcn"),import.meta.url).toString()})),parcelRequire.register("lXrwy",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("dss99"),import.meta.url).toString()})),parcelRequire.register("4Op5W",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("5js9q"),import.meta.url).toString()})),parcelRequire.register("f323l",(function(e,o){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("3ogLL"),import.meta.url).toString()}));var $bdbedfda4b793e1e$exports={};parcelRequire("dRo73").register(JSON.parse('{"84qfS":"index.9c937fe0.js","6UgDP":"eve.1d379c98.glb","2fkcW":"crystal.b05326a7.obj","jMxmz":"cristal.27772d55.png","dutcn":"trap.092ba82a.obj","dss99":"trap1.1b18add7.png","5js9q":"stone.33b4a84b.jpg","3ogLL":"fire.e7f12c4f.png","kPc2l":"index.7243fbdb.js"}')),parcelRequire("hktkA");